## VM are IaaS whereas WebApps are PaaS
- Azure Web Apps has features such as autoscaling and security
- DevOps capability such as CD (cont deployment)
- You dont maintain underlying resources
- can host java/ .net/ python etc

## Creation of Web App resource (aka Compute Machines)
- Create with a unique web app name
- Select a .NET runtime stack, or python/java version
- Select OS - linux or Windows
- Select or Create a new App Service Plan (tells the CPU/Memory etc to be used) and redundancy

## Publish
- publishing is very easy from VS
- select subscription, resource group and web app name and publish

## Azure SQL DB
- You can download and install SSMS tool (SQL Server Mgmt Studio) locally and access Azure SQL DB via that

## Connecting to Az DB from c#
- Install NuGet pkg System.Data.SqlClient
- Establish connection using SqlConnection() and use SqlCommand to execute your SQL command
- Use SqlDataReader to read the data 

## Integration with GitHub
- Go to WebApp -> Deployment -> Deployment Center
- In Settings select GitHub (Other options are Bitbucket, Local Git, Azure repos, External Git, OneDrive, Dropbox)
- Provide GitHub creds and it will retrieve the code, build it and deploy
- Now if you commit a change in main branch of GitHub, change will be deployed automatically on WebApp

## Connection Strings
- Can be stored in Azure itself
- go to WebApp => Settings -=> Configuration => Application Settings =? Connection Strings
- create a new conn string and give it name, value and type (SQLAzure)
- we can then use IConfiguration via Dep Injection in c# code to get access to this conn string we created

## Web App Logging
- Application logging - your log messages
- Web Server logging - records raw HTTP request data
- Detailed error messages - stores copies of .htm error pages sent to client
- Deployment logging - publish related
- You can turn the logs under Web App => Monitoring
- You can see the real time logs inder Mointoring => Log Stream

## Auto Scaling
- With web apps we can configure auto scaling based on certain metrices such as CPU percentage
- You can create rules to scale in/out the web apps
- You can specify min/max count for web apps
- Scale Up => Vertical Scaling
- Scale Out => Horizontal Scaling

## Deployment Slots
- Productions and Staging slots
- Deploy on staging and verify
- If everything is good, you can switch slots
- can also rollback by going back to earlier slot
- Under Deployment there is an option of slots

## Deployment Slots Webapp with DB
- When ealing with DB, you can create another DB say stagingdb and point the SQLConnection string to that by creating it via WebApp -> Env Variables -> Connection Strings
- During SQLConnection creation, check the "Deployment Slots" and when you make a switch the webapp will use the Production based SQLConnection string.

## Azure App Configuraion
We can create a resource of type "App Configuration" system wide and store our key/values such as SQL Connection strings there instead of WebApp specific level.<br>
**App Configuration provides:**

A fully managed service that can be set up in minutes.
Flexible key representations and mappings.
Versioning with labels.
Point-in-time restores of configuration up to 30 days later.
Native integration with popular frameworks, including .NET, Java, Python, and Javascript.
Enhanced security through Azure-managed identities.
Complete data encryption at rest or in transit.
CI/CD integration with Azure Pipelines and Github Actions.
Key Vault Reference support for direct access to secrets and certificates.
Feature management with filters to limit the time or target group availability of each flag.

To use it add "AzureAppConiguration" nuget packages to your project and connect to App Config using its connection string (settings -> access keys -> connection string)<br>
Here is how it looks => Endpoint=https://appconfigvk.azconfig.io;Id=BD1X;Secret=HE1FuYChQfsl8Wd6PkfVBHIqMMkTVHjP+5AwRcJ5i=<br>
// Load configuration from Azure App Configuration<br>
builder.Configuration.AddAzureAppConfiguration(connectionString);<br>
Now we can use configurayion object to access conn strings using their key names.

https://learn.microsoft.com/en-us/azure/azure-app-configuration/quickstart-dotnet-core-app?tabs=windowscommandprompt

## Feature Flags => App Config -> Operations -> Feature Manager
You can define feature flags such as "Beta" and enable or disable it from there.<br>
Install Microsoft.FeatureManager nuget package in your project<br>
https://learn.microsoft.com/en-us/azure/azure-app-configuration/concept-feature-management

```
if (featureFlag) {
    // Run the following code
}
```







